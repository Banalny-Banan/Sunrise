using Exiled.Events.EventArgs.Player;

namespace Sunrise.Features.ExploitPatches;

/// <summary>
///     Makes sure that cuffed players cannot equip items.
/// </summary>
internal class DisarmedItemUseExploitPatchModule : PluginModule
{
    protected override void OnEnabled()
    {
        Handlers.Player.ChangingItem += OnChangingItem;
    }

    protected override void OnDisabled()
    {
        Handlers.Player.ChangingItem -= OnChangingItem;
    }

    void OnChangingItem(ChangingItemEventArgs ev)
    {
        if (ev.Player.IsCuffed && ev.Item != null)
            ev.IsAllowed = false;
    }
}